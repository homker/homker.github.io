
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>关于CMD的思考 | homker</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="homker">
    

    
    <meta name="description" content="最近在学习sea.js的用法，sea.js是一个基于CMD规范的js模块化加载框架。然后发现他和php的差别还是蛮大哈，有一些问题，就开始在脑中转啊转，记录下来，以免下次脑洞又大开了。
#CMD
什么是CMDCMD（Common Module Definition）说白了就是一个前端规范，他规定了一个长的好看的模块（Module）应该长成什么样。那为什么要用CMD呢？要解释为什么用CMD我们要先知">
<meta property="og:type" content="article">
<meta property="og:title" content="关于CMD的思考">
<meta property="og:url" content="http://yoursite.com/2015/05/17/关于CMD的思考/index.html">
<meta property="og:site_name" content="homker">
<meta property="og:description" content="最近在学习sea.js的用法，sea.js是一个基于CMD规范的js模块化加载框架。然后发现他和php的差别还是蛮大哈，有一些问题，就开始在脑中转啊转，记录下来，以免下次脑洞又大开了。
#CMD
什么是CMDCMD（Common Module Definition）说白了就是一个前端规范，他规定了一个长的好看的模块（Module）应该长成什么样。那为什么要用CMD呢？要解释为什么用CMD我们要先知">
<meta property="og:updated_time" content="2015-10-29T09:30:54.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="关于CMD的思考">
<meta name="twitter:description" content="最近在学习sea.js的用法，sea.js是一个基于CMD规范的js模块化加载框架。然后发现他和php的差别还是蛮大哈，有一些问题，就开始在脑中转啊转，记录下来，以免下次脑洞又大开了。
#CMD
什么是CMDCMD（Common Module Definition）说白了就是一个前端规范，他规定了一个长的好看的模块（Module）应该长成什么样。那为什么要用CMD呢？要解释为什么用CMD我们要先知">

    
    <link rel="alternative" href="/atom.xml" title="homker" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/logo.png">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="homker">homker</a></h1>
				<h2 class="blog-motto">单身不能成为你无聊的借口</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">首页</a></li>
					
						<li><a href="/archives">归档</a></li>
					
					<li>
 					
					<form class="search" action="/search/index.html" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" autocomplete="off" name="q" maxlength="20" placeholder="搜索" />
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/05/17/关于CMD的思考/" title="关于CMD的思考" itemprop="url">关于CMD的思考</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="homker" target="_blank" itemprop="author">homker</a>
		
  <p class="article-time">
    <time datetime="2015-05-17T08:22:00.000Z" itemprop="datePublished"> 发表于 2015-05-17</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		
			<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#u4EC0_u4E48_u662FCMD"><span class="toc-number">1.</span> <span class="toc-text">什么是CMD</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#u4EC0_u4E48_u662F_u6A21_u5757"><span class="toc-number">1.1.</span> <span class="toc-text">什么是模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#u4E3A_u4EC0_u4E48_u8981_u7528_u6A21_u5757"><span class="toc-number">1.2.</span> <span class="toc-text">为什么要用模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#u5982_u4F55_u4F7F_u7528_u6A21_u5757"><span class="toc-number">1.3.</span> <span class="toc-text">如何使用模块</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#u4E3A_u4EC0_u4E48_u7528CMD"><span class="toc-number">2.</span> <span class="toc-text">为什么用CMD</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#u5982_u4F55_u4F7F_u7528CMD"><span class="toc-number">3.</span> <span class="toc-text">如何使用CMD</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#define"><span class="toc-number">3.1.</span> <span class="toc-text">define</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#require"><span class="toc-number">3.2.</span> <span class="toc-text">require</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exports"><span class="toc-number">3.3.</span> <span class="toc-text">exports</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#module"><span class="toc-number">3.4.</span> <span class="toc-text">module</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#u4E00_u4E9B_u65B0_u7684_u601D_u8003"><span class="toc-number"></span> <span class="toc-text">一些新的思考</span></a>
		
		</div>
		
		<p>最近在学习<a href="http://seajs.org/docs/#intro" target="_blank" rel="external"><code>sea.js</code></a>的用法，sea.js是一个基于<a href="https://github.com/seajs/seajs/issues/242" target="_blank" rel="external"><code>CMD</code></a>规范的js<a href="https://github.com/seajs/seajs/issues/547" target="_blank" rel="external"><code>模块化</code></a>加载框架。然后发现他和php的差别还是蛮大哈，有一些问题，就开始在脑中转啊转，记录下来，以免下次脑洞又大开了。</p>
<p>#CMD</p>
<h2 id="u4EC0_u4E48_u662FCMD"><a href="#u4EC0_u4E48_u662FCMD" class="headerlink" title="什么是CMD"></a>什么是CMD</h2><p>CMD（Common Module Definition）说白了就是一个前端规范，他规定了一个长的好看的<code>模块</code>（Module）应该长成什么样。那为什么要用CMD呢？要解释为什么用CMD我们要先知道什么是模块(module)。。。为了表示我还是有严谨性思维的，我们以下的讨论都只局限在<code>javascript</code>的大前提下。</p>
<h3 id="u4EC0_u4E48_u662F_u6A21_u5757"><a href="#u4EC0_u4E48_u662F_u6A21_u5757" class="headerlink" title="什么是模块"></a>什么是模块</h3><p><a href="http://zh.wikipedia.org/wiki/%E6%A8%A1%E7%B5%84_%28%E7%A8%8B%E5%BC%8F%E8%A8%AD%E8%A8%88%29" target="_blank" rel="external">wiki上对于模块的定义如下</a>：</p>
<blockquote>
<p>软件模块（Module）是一套一致而互相有紧密关连的软件组织。它分别包含了程序和数据结构两部分。<br>现代软件开发往往利用模块作合成的单位。<br>模块的接口表达了由该模块提供的功能和调用它时所需的元素。<br>模块是可能分开地被编写的单位。这使他们可再用和允许广泛人员同时协作编写及研究不同的模块。</p>
</blockquote>
<p>解释的其实都比较清楚了，简单的说，就是一个可以复用，替换的数据和执行体的集合。<br><a id="more"></a></p>
<h3 id="u4E3A_u4EC0_u4E48_u8981_u7528_u6A21_u5757"><a href="#u4E3A_u4EC0_u4E48_u8981_u7528_u6A21_u5757" class="headerlink" title="为什么要用模块"></a>为什么要用模块</h3><p>这个啊，要从最开始说起，最开始，我们写javascript代码是这样的。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#60;!DOCTYPE html&#62;&#10;&#60;html&#62;&#10;    &#60;head&#62;&#10;        &#60;meta charset=&#34;utf-8&#34;&#62;&#10;        &#60;title&#62;this is a title&#60;/title&#62;&#10;    &#60;/head&#62;&#10;    &#60;body&#62;&#10;        &#60;div id=&#34;contianer&#34;&#62;&#60;/div&#62;&#10;        &#60;script type=&#34;application/javascript&#34;&#62;&#10;            var a = document.getElementById(&#34;contianer&#34;);&#10;            a.addEventListener(&#39;click&#39;,function()&#123;&#10;                //do some thing&#10;            &#125;,false);&#10;        &#60;/script&#62;&#10;    &#60;/body&#62;&#10;&#60;/html&#62;</span><br></pre></td></tr></table></figure></p>
<p>这样写代码很简单，写的很爽，加上一点jquery啊，zepto啊，就更爽了，但是呢，如果代码一多，我们就会很蛋疼了。首先，我们会发现全局变量满天飞，根本不知道哪些变量能用，哪些变量不能用，哪些变量该GC哪些并不能够GC。然后，当我们想把一些代码通过<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#60;script type=&#34;application/javascript&#34; src=&#34;path/to/script&#34;&#62;&#60;/script&#62;</span><br></pre></td></tr></table></figure></p>
<p>的方式外联的时候，就会发现我根本就不知道别人都用了什么啊，a的东西上线，b就不能用了。囧。。。</p>
<h3 id="u5982_u4F55_u4F7F_u7528_u6A21_u5757"><a href="#u5982_u4F55_u4F7F_u7528_u6A21_u5757" class="headerlink" title="如何使用模块"></a>如何使用模块</h3><p>所以，后来聪明一点的人们就开始这样写代码。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#60;!DOCTYPE html&#62;&#10;&#60;html&#62;&#10;    &#60;head&#62;&#10;        &#60;meta charset=&#34;utf-8&#34;&#62;&#10;        &#60;title&#62;this is a title&#60;/title&#62;&#10;    &#60;/head&#62;&#10;    &#60;body&#62;&#10;        &#60;div id=&#34;contianer&#34;&#62;&#60;/div&#62;&#10;        &#60;script type=&#34;application/javascript&#34;&#62;&#10;            ;(function()&#123;&#10;                var a = document.getElementById(&#34;contianer&#34;);&#10;                a.addEventListener(&#39;click&#39;,function()&#123;&#10;                    //do some thing&#10;                &#125;,false);&#125;)();&#10;        &#60;/script&#62;&#10;    &#60;/body&#62;&#10;&#60;/html&#62;</span><br></pre></td></tr></table></figure></p>
<p>通过js的闭包机制，和js的变量作用域的机制，来分隔不同的代码。通过这样的分隔，我们权且将用匿名函数包起来的代码叫做一个模块吧。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">;(function(jquery)&#123;&#10;   var a = jquery();//&#36890;&#36807;&#21464;&#37327;&#20256;&#36882;&#30340;&#26041;&#24335;&#26469;&#20351;&#29992;&#20989;&#25968;&#22806;&#30340;&#21464;&#37327;&#65292;&#24403;&#28982;&#65292;&#22914;&#26524;&#26159;&#20840;&#23616;&#21464;&#37327;&#65292;&#21487;&#20197;&#19981;&#29992;&#12290;= =&#10;   //some javascript code&#10;&#125;)(jquery)</span><br></pre></td></tr></table></figure></p>
<p>然后呢，这样我们就可以在自己的模块中做一些羞羞的事了。但是，如果，我们要让其他人和我们一起做一些羞羞的事要怎么办？这个时候涉及到一个接口暴露的问题，在其他的面向对象的语言当中，我们可以使用实例化和命名空间来实现，但是js天生就没有类的概念啊，虽然，我们可以在上面模拟实现。既然我们可以模拟实现类，我们自然就可以模拟实例化和命名空间咯~！于是就有了以下的代码。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//&#23450;&#20041;&#10;var moduleName = (function()&#123;&#10;    var a = &#123;&#125;,b=1;//b&#20316;&#20026;&#36825;&#20010;module&#30340;&#31169;&#26377;&#21464;&#37327;&#12290;&#10;    function privateFunction()&#123;&#10;        //do some thing;&#10;    &#125;&#10;    &#10;    a.b=1;//a&#30340;&#20844;&#26377;&#21464;&#37327;&#10;    a.publicFunction()&#123;&#10;        //do some thing;&#10;    &#125;&#10;    &#10;    return a;&#10;&#125;)();&#10;//&#35843;&#29992;&#10;moduleName.publicFunction();</span><br></pre></td></tr></table></figure></p>
<p>这样的话，我们就可以将我们想允许对外调用的函数暴露出来给大家使用了。那么大家就可以一起做一些羞羞的事情了。如果要再复杂一点，我们可以看以下一个例子。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var util = (function(parent,$)&#123;&#10;    var my = parent.parent = parent.parent||&#123;&#125;;&#10;    my.mymethod =  function()&#123;//mymethod&#23646;&#20110;parent.parent&#23545;&#35937;&#30340;&#23376;&#26041;&#27861;&#10;        // do some thing&#10;    &#125;&#10;    return parent;&#10;&#125;)(parent||&#123;&#125;,jquery);</span><br></pre></td></tr></table></figure></p>
<p>以上的话，是将子模块的属性方法动态加载到了父模块上。</p>
<h2 id="u4E3A_u4EC0_u4E48_u7528CMD"><a href="#u4E3A_u4EC0_u4E48_u7528CMD" class="headerlink" title="为什么用CMD"></a>为什么用CMD</h2><p>讨论完如何用模块，我们回来讲为什么用CMD，为什么呢，这个啊，因为实现js的模块化的方法还是有很多的啊。可以参考<a href="http://www.jb51.net/article/34958.htm" target="_blank" rel="external">这篇文章</a>。虽然不知道jb从哪里抠来的文章，我没有找到原作者。。。除了实现细节的实现方法之外，加载的机制不同也出现了其他不同的规范,比如说<code>AMD</code>（Asynchronous Module Definition）。简单的说，二者区别在如下：</p>
<blockquote>
<ul>
<li>AMD是依赖关系前置,<br>CMD是按需加载。</li>
<li>AMD:API根据使用范围有区别，但使用同一个api接口<br>CMD:每个API的职责单一</li>
<li>AMD的优点是：异步并行加载，在AMD的规范下，同时异步加载是不会产生错误的。<br>CMD的机制则不同，这种加载方式会产生错误，如果能规范化模块内容形式，也可以</li>
</ul>
</blockquote>
<p>如果要深入了解他们二者的区别，请看<a href="http://www.zhihu.com/question/20351507" target="_blank" rel="external">玉伯大大在知乎上的回答</a>；</p>
<h2 id="u5982_u4F55_u4F7F_u7528CMD"><a href="#u5982_u4F55_u4F7F_u7528CMD" class="headerlink" title="如何使用CMD"></a>如何使用CMD</h2><p>好了，说了那么多，我们要怎么用呢。CMD的常用接口有五个。我也就看懂了这五个 T…T。分别是<code>define</code>，<code>require</code>，<code>require.async</code>，<code>exports</code>，<code>module</code>。</p>
<h3 id="define"><a href="#define" class="headerlink" title="define"></a>define</h3><p>define 从字面上理解，是定义的意思，那么他就是定义的意思。定义一个<code>函数</code>，<code>对象</code>，或者<code>字符串</code>。如果是一个参数的时候：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//define(factory)&#10;define(&#123;&#39;foo&#39;:&#39;&#19996;&#19996;&#39;&#125;);&#10;//&#36825;&#20010;&#19996;&#35199;&#21487;&#20197;&#29702;&#35299;&#25104;&#20026;&#10;define(function()&#123;&#10;    return &#123;&#10;        &#39;foo&#39;:&#39;&#19996;&#19996;&#39;&#10;    &#125;&#10;&#125;)&#65307;&#10;define(&#39;&#23383;&#31526;&#20018;&#20013;&#30340;&#123;&#123;foo&#125;&#125;&#39;)//&#25454;&#35828;&#36825;&#20010;&#26159;&#29992;&#26469;&#23450;&#20041;&#27169;&#26495;&#30340;&#65292;&#20854;&#23454;&#25105;&#24182;&#19981;&#26159;&#24456;&#28165;&#26970;&#36825;&#20010;&#35201;&#24590;&#20040;&#29702;&#35299;&#12290;&#10;//&#23450;&#20041;&#20989;&#25968;&#26102;&#65292;&#40664;&#35748;&#20256;&#20837;&#30340;&#21442;&#25968;&#26377;&#19977;&#20010; require &#65292;export&#65292;module&#10;define(function(require,export,module)&#123;&#10;    //do some thing;&#10;&#125;);</span><br></pre></td></tr></table></figure></p>
<p>define一般情况下会使用两个以上参数，<code>id</code>，<code>deps</code>，<code>function</code>。其中，id表示模块标识符，deps<code>数组</code>表示依赖关系。<em>id和deps可省，如省则有构建器自动生成。</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">define(&#39;a&#39;,[&#39;zepto&#39;],function()&#123;&#10;    //do some thing&#10;&#125;);&#10;&#10;//tips&#65306;&#19968;&#20010;&#23567;&#25216;&#24039;&#65292;&#29992;&#26469;&#21028;&#26029;&#39029;&#38754;&#19978;&#26159;&#21542;&#26377;CMD&#21152;&#36733;&#22120;&#10;&#10;if(typeof define === &#34;function&#34;&#38;&#38;define.md)&#123;&#10;    //&#35828;&#26126;&#39029;&#38754;&#20013;&#23384;&#22312;cmd&#21152;&#36733;&#22120;&#10;&#125;</span><br></pre></td></tr></table></figure>
<h3 id="require"><a href="#require" class="headerlink" title="require"></a>require</h3><p>require是一个<code>function</code> 用来将其他模块的接口导入。sea.js中对require有自己的一个规范。<a href="https://github.com/seajs/seajs/issues/259" target="_blank" rel="external">详情点我</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">define(function(require,exports,module)&#123;&#10;    //&#21152;&#36733;&#10;    var a = reuire(&#39;./a&#39;);&#10;    //&#35843;&#29992;&#10;    a.method();&#10;    // &#24322;&#27493;&#21152;&#36733;&#10;    require.async(&#39;./b&#39;,function(b)&#123;&#10;        b.method();//&#35843;&#29992;&#10;    &#125;);//&#21333;&#20010;&#10;    require.async([&#39;./c&#39;,&#39;./d&#39;],function(c,d)&#123;&#10;        c.method();&#10;        d.method();&#10;    &#125;)&#65307;//&#22810;&#20010;&#10;    //require.resolve()&#36890;&#36807;require&#30340;&#20869;&#37096;&#26426;&#21046;&#33719;&#21462;module&#30340;&#32477;&#23545;&#36335;&#24452;&#10;    console.log(require.resolve(&#39;./e&#39;));//http://example.com/path/to/module&#10;&#125;);</span><br></pre></td></tr></table></figure></p>
<h3 id="exports"><a href="#exports" class="headerlink" title="exports"></a>exports</h3><p>exports 是一个<code>objetc</code>，用来提供对外的接口。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">define(function(require,exports,module)&#123;&#10;    exports.a = &#34;aaa&#34;;//&#23545;&#22806;&#24320;&#25918;a&#10;    exports.method = function()&#123;&#10;        //do some thing&#10;    &#125;&#65307;//&#23545;&#22806;&#24320;&#25918;&#30340;&#26041;&#27861;&#10;    //&#21487;&#20197;&#20351;&#29992;return object &#26469;&#20195;&#26367;exports&#10;    return &#123;&#10;        a: &#34;aaa&#34;,&#10;        method: function()&#123;&#10;            //do some thing&#10;        &#125;&#10;    &#125;   &#10;&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="module"><a href="#module" class="headerlink" title="module"></a>module</h3><p>module 是一个object，用来存储当前module的一些属性和方法，可以简单的理解为this。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">define(&#39;id&#39;,[&#39;jquery&#39;],function(require,exports,module)&#123;&#10;    //module.id&#35760;&#24405;&#20102;&#24403;&#21069;&#30340;id&#10;    console.log(module.id)//id&#10;    //module.uri&#36890;&#36807;&#20869;&#37096;&#26426;&#21046;&#33719;&#21462;&#24403;&#21069;module&#30340;&#32477;&#23545;&#36335;&#24452;&#10;    console.log(module.uri);//http://example.com/path/to/this/file.js&#10;    //&#22914;&#26524;&#19981;&#22635;id&#30340;&#35805;&#65292;module.id === module.uri&#10;    console.log(module.dependencies)//&#24403;&#21069;module&#30340;&#24341;&#29992;[&#39;jquery&#39;]&#10;    console.log(module.exports === exports);//true&#10;    //exports&#26159;module.exports&#30340;&#19968;&#20010;&#24341;&#29992;&#10;&#125;);</span><br></pre></td></tr></table></figure></p>
<h1 id="u4E00_u4E9B_u65B0_u7684_u601D_u8003"><a href="#u4E00_u4E9B_u65B0_u7684_u601D_u8003" class="headerlink" title="一些新的思考"></a>一些新的思考</h1><p>CMD 其实是sea.js在推广过程中的规范化输出，但是，还是有一些东西在定义上会给日以困惑，比如说交叉引用的问题。具体的问题描述和解决可以看<a href="http://www.jianshu.com/p/1245af09383e" target="_blank" rel="external">这里</a>。在sea.js的3.0中对于这个有了一个修复，使用了node对于module的加载机制，可以看<a href="http://www.infoq.com/cn/articles/nodejs-module-mechanism/" target="_blank" rel="external">这里</a>，简单的说，使用cache和flag的机制来实现重复引用时只加载一次。以下是sea.js的源码中和这个有关的部分。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Module.prototype.pass = function() &#123;&#10;  var mod = this&#10;&#10;  var len = mod.dependencies.length&#10;&#10;  for (var i = 0; i &#60; mod._entry.length; i++) &#123;&#10;    var entry = mod._entry[i]&#10;    var count = 0&#10;    for (var j = 0; j &#60; len; j++) &#123;&#10;      var m = mod.deps[mod.dependencies[j]]&#10;      // If the module is unload and unused in the entry, pass entry to it&#10;      if (m.status &#60; STATUS.LOADED &#38;&#38; !entry.history.hasOwnProperty(m.uri)) &#123;&#10;        entry.history[m.uri] = true&#10;        count++&#10;        m._entry.push(entry)&#10;        if(m.status === STATUS.LOADING) &#123;&#10;          m.pass()&#10;        &#125;&#10;      &#125;&#10;    &#125;&#10;    // If has passed the entry to it&#39;s dependencies, modify the entry&#39;s count and del it in the module&#10;    if (count &#62; 0) &#123;&#10;      entry.remain += count - 1&#10;      mod._entry.shift()&#10;      i--&#10;    &#125;&#10;  &#125;&#10;&#125;&#10;&#10;function require(id) &#123;&#10;    var m = mod.deps[id] || Module.get(require.resolve(id))&#10;    if (m.status == STATUS.ERROR) &#123;&#10;      throw new Error(&#39;module was broken: &#39; + m.uri)&#10;    &#125;&#10;    return m.exec()&#10;  &#125;&#10;  &#10;  Module.get = function(uri, deps) &#123;&#10;  return cachedMods[uri] || (cachedMods[uri] = new Module(uri, deps))&#10;&#125;</span><br></pre></td></tr></table></figure>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/CMD-seajs/">CMD seajs</a>
  </div>

</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://yoursite.com/2015/05/17/关于CMD的思考/" data-title="关于CMD的思考 | homker" data-tsina="null" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2015/05/18/html5中的声音（一）/" title="html5中的声音（一）">
  <strong>上一篇：</strong><br/>
  <span>
  html5中的声音（一）</span>
</a>
</div>


<div class="next">
<a href="/2015/05/15/php的基础知识/"  title="php的基础知识">
 <strong>下一篇：</strong><br/> 
 <span>php的基础知识
</span>
</a>
</div>

</nav>

	
<section id="comments" class="comment">
	<div class="ds-thread" data-thread-key="2015/05/17/关于CMD的思考/" data-title="关于CMD的思考" data-url="http://yoursite.com/2015/05/17/关于CMD的思考/"></div>
</section>


</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
 
 <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#u4EC0_u4E48_u662FCMD"><span class="toc-number">1.</span> <span class="toc-text">什么是CMD</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#u4EC0_u4E48_u662F_u6A21_u5757"><span class="toc-number">1.1.</span> <span class="toc-text">什么是模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#u4E3A_u4EC0_u4E48_u8981_u7528_u6A21_u5757"><span class="toc-number">1.2.</span> <span class="toc-text">为什么要用模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#u5982_u4F55_u4F7F_u7528_u6A21_u5757"><span class="toc-number">1.3.</span> <span class="toc-text">如何使用模块</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#u4E3A_u4EC0_u4E48_u7528CMD"><span class="toc-number">2.</span> <span class="toc-text">为什么用CMD</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#u5982_u4F55_u4F7F_u7528CMD"><span class="toc-number">3.</span> <span class="toc-text">如何使用CMD</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#define"><span class="toc-number">3.1.</span> <span class="toc-text">define</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#require"><span class="toc-number">3.2.</span> <span class="toc-text">require</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exports"><span class="toc-number">3.3.</span> <span class="toc-text">exports</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#module"><span class="toc-number">3.4.</span> <span class="toc-text">module</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#u4E00_u4E9B_u65B0_u7684_u601D_u8003"><span class="toc-number"></span> <span class="toc-text">一些新的思考</span></a>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  

  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/JavaScript-DOM/" title="JavaScript DOM">JavaScript DOM<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/html5/" title="html5">html5<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/XSS/" title="XSS">XSS<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/生活/" title="生活">生活<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/实习总结/" title="实习总结">实习总结<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/CMD-seajs/" title="CMD seajs">CMD seajs<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/学习笔记/" title="学习笔记">学习笔记<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/badjs/" title="badjs">badjs<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="https://coderq.com" target="_blank" title="一个面向程序员交流分享的新一代社区">码农圈</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.ecjtu.net" target="_blank" title="日新网">日新网</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m homker. a student from ecjtu.net. <br/>
			This is my blog,believe it or not.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/homker## e.g. wuchong1014 or 2176287895 for http://weibo.com/2176287895" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		<a href="https://github.com/homker for https://github.com/homker" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		
		<a href="https://www.zhihu.com/people/homker## e.g. jark  for http://www.zhihu.com/people/jark" target="_blank" class="icon-zhihu" title="知乎"></a>
		
		
		
		<a href="mailto:liu15jia@163.com## e.g. imjark@gmail.com" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2016 
		
		<a href="/about" target="_blank" title="homker">homker</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#nothing"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
});     
</script>



<script type="text/javascript">
  var duoshuoQuery = {short_name:"homker"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 







<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->





<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
